(
  (
    (
      (ProducerWantsToStart [>> threadP]);
      (ProducerStarts [threadP >>+ groupP]);
    )* ;
    ProducerEnds [threadP];
  )
  |
  (
    (
      (ConsumerWantsToStart [>> threadC]);
      (ConsumerStarts [threadC >>+ groupC]);
    ) * ;
    ConsumerEnds [threadP];
  )
) *;